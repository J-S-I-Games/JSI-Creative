<!DOCTYPE html>
<html lang="es">
<head>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile } 
    from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";
  import { getFirestore, doc, setDoc } 
    from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCrZU4jrYQdLWICNIa-PsaurM-nQNDVcMk",
    authDomain: "jsi-creative.firebaseapp.com",
    projectId: "jsi-creative",
    storageBucket: "jsi-creative.firebasestorage.app",
    messagingSenderId: "622524062601",
    appId: "1:622524062601:web:69d2afeeb6503c2a605f58",
    measurementId: "G-SMYBMVEJ48"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth(app);
  const db = getFirestore(app);

  document.addEventListener("DOMContentLoaded", () => {

    const createBtn = document.querySelector(".create-btn"); 
    const closeBtn = document.querySelector(".close-panel"); 
    const registerBtn = document.querySelector(".register-btn"); 
    const loginBtn = document.getElementById("loginBtn");
    const closeLoginBtn = document.querySelector("#loginPanel .close-panel");

    function handleLoginSuccess(user) {
      localStorage.setItem("uid", user.uid);
      localStorage.setItem("displayName", user.displayName || user.email);

      document.getElementById("loginOverlay").style.display = "none";
      document.getElementById("registerOverlay").style.display = "none";

      if (registerBtn) registerBtn.style.display = "none";
      const linesBtnContainer = document.getElementById("linesBtnContainer");
      if (linesBtnContainer) linesBtnContainer.style.display = "flex";
    }
    if (createBtn && closeBtn) {
      createBtn.addEventListener("click", async () => {
        createBtn.disabled = true;
        closeBtn.disabled = true;

        const email = document.querySelector("#regEmail").value;
        const password = document.querySelector("#regPassword").value;
        const confirmPassword = document.querySelector("#regConfirm").value;
        const username = document.querySelector("#regName").value;

        if (password !== confirmPassword) {
          alert("Las contraseñas no coinciden ❌");
          createBtn.disabled = false;
          closeBtn.disabled = false;
          return;
        }

        try {
          const userCredential = await createUserWithEmailAndPassword(auth, email, password);
          await updateProfile(userCredential.user, { displayName: username });
          await setDoc(doc(db, "users", userCredential.user.uid), {
            username,
            email,
            createdAt: new Date()
          });

          alert("Cuenta creada con éxito ✅");
          handleLoginSuccess(userCredential.user);

        } catch (error) {
          console.error("Error al registrar:", error);
          alert("Error: " + error.message);
        } finally {
          createBtn.disabled = false;
          closeBtn.disabled = false;
        }
      });
    }
    if (loginBtn) {
      loginBtn.addEventListener("click", async () => {
        loginBtn.disabled = true;
        if (closeLoginBtn) closeLoginBtn.disabled = true;

        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;

        if (!email || !password) {
          alert("Por favor completa todos los campos.");
          loginBtn.disabled = false;
          if (closeLoginBtn) closeLoginBtn.disabled = false;
          return;
        }

        try {
          const userCredential = await signInWithEmailAndPassword(auth, email, password);
          alert(`¡Bienvenido ${userCredential.user.displayName || userCredential.user.email}! ✅`);
          handleLoginSuccess(userCredential.user);

        } catch (error) {
          console.error("Error al iniciar sesión:", error);
          alert("Error: " + error.message);
        } finally {
          loginBtn.disabled = false;
          if (closeLoginBtn) closeLoginBtn.disabled = false;
        }
      });
    }
	
    const savedUid = localStorage.getItem("uid");
if (savedUid) {
  const displayName = localStorage.getItem("displayName");
  const linesBtnContainer = document.getElementById("linesBtnContainer");
  if (linesBtnContainer) linesBtnContainer.style.display = "flex";
  if (registerBtn) registerBtn.style.display = "none";
  const registerOverlay = document.getElementById("registerOverlay");
  const loginOverlay = document.getElementById("loginOverlay");
  if (registerOverlay) registerOverlay.style.display = "none";
  if (loginOverlay) loginOverlay.style.display = "none";

  console.log(`Usuario cargado desde localStorage: ${displayName}`);
}
  });  
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

onAuthStateChanged(auth, (user) => {
  const emailField = document.getElementById("userEmail");
  const nameField = document.getElementById("user");

  if (user) {
    if (emailField) emailField.textContent = user.email || "Correo no disponible";
    if (nameField) nameField.textContent = user.displayName || "Nombre no disponible";
  } else {
    if (emailField) emailField.textContent = "No has iniciado sesión";
    if (nameField) nameField.textContent = "";
  }
});


</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>J-S-I Creative</title>
<!-- Vinculación de cuenta AdSense -->
  <meta name="google-adsense-account" content="ca-pub-4078595962989795">
  
  <!-- Script de AdSense para cargar anuncios -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4078595962989795"
     crossorigin="anonymous"></script>
<style>
  body {
    margin: 0;
    padding-top: 160px;
    font-family: Arial, sans-serif;
    background-color: #111;
    color: white;
    position: relative;
    overflow-x: hidden;
	
	font-family: Arial, sans-serif;
  }

  .neon-line-horizontal {
    position: fixed;
    left: 0;
    width: 100%;
    height: 2px;
    background: white;
    box-shadow: 0 0 10px white, 0 0 20px white, 0 0 30px white;
    z-index: 0;
    animation: moveHorizontal 25s linear infinite;
  }

  .neon-top { top: 0; }
  .neon-bottom { bottom: 0; }

.neon-line-vertical {
  position: fixed;
  top: 0;
  bottom: 0;
  width: 2px;
  background: white;
  box-shadow: 0 0 5px white, 0 0 10px white;
  z-index: 0;
  animation: moveVertical 25s linear infinite;
}

@keyframes moveVertical {
  0% { left: -2px; }
  99% { left: 100%; }
}


  .top-bar {
    background-color: #222;
    width: 100%;
    padding: 10px 0;
    text-align: center;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1000;
  }

  .dropdown-btn {
    background-color: #333;
    color: white;
    border: none;
    font-size: 16px;
    cursor: pointer;
    padding: 10px 20px;
  }

  .dropdown-btn:hover { background-color: #555; }

.dropdown-content {
  display: none;
  position: absolute; 
  top: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-10px);
  background-color: #555;
  padding: 10px;
  white-space: nowrap;
  z-index: 1001;
  flex-direction: column;
  border-radius: 0px;
  opacity: 0;
  transition: opacity 0.3s ease, transform 0.3s ease;
  pointer-events: none;
}
  .dropdown-content a {
    color: white;
    text-decoration: none;
    margin: 0 10px;
    padding: 5px 10px;
    background-color: #666;
  }

  .dropdown-content a:hover { background-color: #777; }

  .dropdown-content.show { display: block; }


  .second-bar img { height: 60px; width: auto; }

  
  .sub-bar {
    background-color: #2a2a2a;
    width: 100%;
    height: 60px;
    position: fixed;
    top: 130px;
    left: 0;
    z-index: 998;
    display: flex;
    align-items: center;
    padding: 0 20px;
    gap: 30px;
  }
  
  .sub-dropdown {
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 999;
  }

  .dropdown-display {
    padding: 8px 15px;
    background-color: #555;
    color: white;
    cursor: pointer;
    border: none;
    min-width: 120px;
    text-align: left;
    transition: background-color 0.2s;
  }

  .dropdown-display:hover { background-color: #666; }

  .dropdown-items {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background-color: #555;
  margin-top: 2px;
  min-width: 150px;
  z-index: 1000;
  flex-direction: column;

  /* Animación */
  opacity: 0;
  transform: translateY(-10px);
  transition: opacity 0.3s ease, transform 0.3s ease;
  pointer-events: none;
}

.dropdown-items.show {
  display: flex;
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}
  .dropdown-items button:hover { background-color: #777; }
.card-inner {
  background-color: #2a2a2a;
  border-radius: 8px;
  padding: 10px;
  width: 140px;
  text-align: center;
  box-shadow: 0 0 8px rgba(0,0,0,0.7);
  transform-style: preserve-3d;
  transition: transform 0.1s ease-out;
  cursor: pointer;
}
.card-inner img, .card-inner h3 {
  pointer-events: none;
  user-select: none;
  max-width: 100%;
  border-radius: 0px;
  margin-bottom: 8px;
  color: white;
}

.card-outer.spin360 .card-inner {
  animation: spin360Scale 1s forwards;
}

.card-outer {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  text-align: inherit;
}
.card-outer:focus {
  outline: none; 
}

@keyframes spin360Scale {
  0% { transform: rotateY(0deg) scale(1); }
  50% { transform: rotateY(180deg) scale(1.1); }
  100% { transform: rotateY(360deg) scale(1); }
}
  
 .model-panel {
  display: none;
  position: fixed;
  top: 130px;
  left: 0;
  width: 100%;
  height: calc(100% - 130px);
  background-color: rgba(0,0,0,0.95);
  color: white;
  z-index: 2000;
  padding: 20px;
  box-sizing: border-box;
}

.cards-container {
  display: flex;
  flex-wrap: wrap;
  gap: 30px;
  justify-content: flex-start;
  margin: 80px 20px 40px 20px;
}



.dropdown-items button {
  position: relative; 
  background-color: #666;
  color: white;
  border: none;
  text-align: left;
  padding: 8px 12px;
  cursor: pointer;
  transition: background-color 0.2s;
  margin: 2px 5px;
  overflow: hidden;
}

.dropdown-items button::after {
  content: "";
  position: absolute;
  bottom: 0;  
  left: 0;
  width: 0;          
  height: 2px;   
  background: white;    
  transition: width 0.3s ease;
}

.dropdown-items button:hover::after {
  width: 100%;
}

.dropdown-items button:hover {
  background-color: #777;
}


.second-bar img {
  height: 60px;
  width: auto;
}

.register-btn {
  position: relative;
  background: #444; 
  color: white;
  border: none;
  font-size: 16px;
  cursor: pointer;
  padding: 10px 20px;
  overflow: hidden;
  margin-right: 40px; 
  border-radius: 0; 
}

/* Línea efecto */
.register-btn::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: white;
  transition: width 0.3s ease;
}

/* Hover */
.register-btn:hover::after {
  width: 100%;
}

.panel-btn {
  padding: 10px 20px;
  border: none;
  border-radius: 0px;
  background: linear-gradient(135deg, #555, #333);
  color: white;
  cursor: pointer;
  font-size: 15px;
  box-shadow: 0 3px 6px rgba(0,0,0,0.4);
  transition: all 0.2s ease;
}

.panel-btn:hover {
  background: linear-gradient(135deg, #777, #555);
  transform: translateY(-2px);
  box-shadow: 0 5px 10px rgba(0,0,0,0.5);
}

.tag {
  display: inline-block;
  background-color: #666;
  color: white;
  padding: 5px 10px;
  margin: 3px;
  border-radius: 0px;
  font-size: 14px;
}
.tag:hover {
  background-color: #777;
}

.close-panel {
  position: absolute;
  top: 20px;
  right: 20px;
  padding: 8px 16px;
  font-size: 14px;
  cursor: pointer;
  background-color: #333;
  color: white;
  border: none;
  border-radius: 0px;
  overflow: hidden;
  transition: background-color 0.2s;
}

.close-panel::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: white;
  transition: width 0.3s ease;
}

.close-panel:hover {
  background-color: #555;
}

.close-panel:hover::after {
  width: 100%;
}


.panel-content .action-btn {
  background-color: #444;
  color: white;
  border: none;
  padding: 8px 18px;
  margin: 5px 10px 10px 0;
  cursor: pointer;
  border-radius: 0px;
  font-size: 14px;
  position: relative;
  overflow: hidden;
  transition: background-color 0.2s;
}

.panel-content .action-btn::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: white;
  transition: width 0.3s ease;
}

.panel-content .action-btn:hover {
  background-color: #555;
}

.panel-content .action-btn:hover::after {
  width: 100%;
}


.overlay {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(4px);
  z-index: 3000;
  display: flex;
  justify-content: center;
  align-items: center;
}

.register-panel {
  background: #444; /* gris medio */
  padding: 25px;
  border-radius: 10px;
  max-width: 400px;
  width: 90%;
  color: white;
  text-align: center;
  position: relative;
  box-shadow: 0 4px 15px rgba(0,0,0,0.7);
}

.register-panel .close-panel {
  position: absolute;
  top: 10px;
  right: 10px;
  background: transparent;
  border: none;
  color: white;
  font-size: 18px;
  cursor: pointer;
}

.reg-input {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
  border: none;
  border-radius: 0px;
  font-size: 14px;
  box-sizing: border-box;
  background: #333;
  color: white;
}

.create-btn {
  width: 100%;
  padding: 10px 20px;
  border: none;
  border-radius: 0px;
  background: linear-gradient(135deg, #000, #333);
  color: white;
  cursor: pointer;
  font-size: 15px;
  font-weight: bold;
  box-shadow: 0 3px 6px rgba(0,0,0,0.5);
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}

.create-btn::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: white;
  transition: width 0.3s ease;
}

.create-btn:hover {
  background: linear-gradient(135deg, #222, #555);
  transform: translateY(-2px);
  box-shadow: 0 5px 12px rgba(0,0,0,0.6);
}

.create-btn:hover::after {
  width: 100%;
}
.register-note {
  font-size: 13px;
  color: #ccc;
  margin-bottom: 15px;
}


.btn-style {
  padding: 10px 20px;
  border: none;
  border-radius: 0px;
  background: linear-gradient(135deg, #000, #333);
  color: white;
  cursor: pointer;
  font-size: 15px;
  font-weight: bold;
  box-shadow: 0 3px 6px rgba(0,0,0,0.5);
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}

/* Línea blanca animada */
.btn-style::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: white;
  transition: width 0.3s ease;
}

.btn-style:hover {
  background: linear-gradient(135deg, #222, #555);
  transform: translateY(-2px);
  box-shadow: 0 5px 12px rgba(0,0,0,0.6);
}

.btn-style:hover::after {
  width: 100%;
}

.dropdown-display.btn-style {
  position: static;
  overflow: visible;
  width: 200px;
  text-align: left;
}


.dropdown-items button:hover {
  background: #555;
}

.dropdown-content a.btn-style {
  display: block;  
  margin: 5px 0;
  text-align: left;
  padding: 8px 15px;
  background-color: #444;
  color: white;
  text-decoration: none;
}

.dropdown-content a.btn-style:hover {
  background-color: #666;
}

.dropdown-wrapper {
  position: relative;
  display: inline-block;
}

/* Dropdown Contacto */
.dropdown-content {
  display: none;
  position: absolute; 
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  background-color: #555;
  padding: 10px;
  white-space: nowrap;
  z-index: 1001;
  flex-direction: column;
  border-radius: 0px;
}
.dropdown-content.show {
  display: flex;
  opacity: 1;
  transform: translateX(-50%) translateY(0);
  pointer-events: auto;
}

.search-box {
  padding: 8px 12px;
  border: none;
  border-radius: 0px;
  font-size: 14px;
  width: 250px;
  background-color: #222;
  color: white;
  outline: none;
  transition: background 0.2s, box-shadow 0.2s;
}

.search-box::placeholder {
  color: #aaa;
}

.search-box:focus {
  background-color: #333;
  box-shadow: 0 0 5px white;
}


.search-input {
  padding: 6px 10px;
  font-size: 14px;
  border-radius: 4px;
  border: none;
  background-color: #888; /* gris */
  color: white;
  width: 200px;
}

.search-input::placeholder {
  color: #eee;
}
.second-bar {
  background-color: #333;
  width: 100%;
  height: 80px;
  position: fixed;
  top: 50px;
  left: 0;
  z-index: 999;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 30px;
  gap: 20px;
}

.left-items {
  display: flex;
  align-items: center;
  gap: 20px;
}

.search-container {
  display: flex;
  align-items: center;
  gap: 10px;
}

#searchInput {
  padding: 8px 12px;
  border-radius: 0px;
  border: none;
  background-color: #555; /* gris */
  color: white;
  font-size: 14px;
  width: 200px;
}

.gallery-container {
  position: relative;
  width: 90%;
  max-width: 600px;
  margin: 20px auto;
  overflow: hidden;
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.gallery-slide {
  display: flex;
  transition: transform 0.3s ease;
  gap: 15px;
}

.gallery-slide img {
  max-width: 100%;
  height: auto;
  border: 2px solid #888;
  border-radius: 5px;
  cursor: pointer;
}

.gallery-prev,
.gallery-next {
  position: absolute;
  background-color: rgba(0,0,0,0.6);
  border: none;
  color: white;
  font-size: 24px;
  padding: 8px 12px;
  cursor: pointer;
  transition: background 0.2s;
  z-index: 10;
}

.gallery-prev:hover,
.gallery-next:hover {
  background-color: rgba(255,255,255,0.2);
}

.gallery-prev { left: 10px; top: 50%; transform: translateY(-50%); }
.gallery-next { right: 10px; top: 50%; transform: translateY(-50%); }
.visitas-box {
  position: fixed;
  top: 15px;  
  left: 15px; 
  padding: 6px 12px;
  background-color: #111;
  border: 1px solid #444;
  border-radius: 6px;
  font-size: 13px;
  font-weight: bold;
  color: #ffffff;
  z-index: 1001;
}

  .modal-content input {
    width: 90%;
    padding: 10px;
    margin: 10px 0;
    border: none;
    border-radius: 5px;
  }

  .modal-content button {
    width: 95%;
    padding: 10px;
    margin: 10px 0;
    border: none;
    border-radius: 5px;
    background-color: #B30000;
    color: #fff;
    font-size: 16px;
    cursor: pointer;
  }

  .switch {
    margin-top: 10px;
    font-size: 14px;
  }

.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.7);
  justify-content: center; align-items: center;
}

.modal-content {
  background-color: #1a1a1a;
  padding: 30px;
  border-radius: 12px;
  width: 350px;
  text-align: center;
  box-shadow: 0 0 20px rgba(0,0,0,0.8);
}

.close {
  color: #fff;
  float: right;
  font-size: 24px;
  cursor: pointer;
}

.container {
  display: flex;
  align-items: center;
  gap: 15px;
}

/* Botón de las rayas */
.lines-btn {
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 5px;
  border: 2px solid #fff;
  background: transparent;
  cursor: pointer;
  border-radius: 1px;
  transition: transform 0.2s ease, border-color 0.2s ease;
}

.lines-btn span {
  width: 15px;
  height: 3px;
  background-color: #fff;
  margin: 3px 0;
  border-radius: 0px;
}

.lines-btn:hover {
  transform: scale(1.1);
  border-color: #d7d7d7;
}
#linesBtnContainer {
  display: none;
  position: fixed;
  top: 80px;
  right: 20px;
  z-index: 1000;
}


  .lines-btn.active span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }
  .lines-btn.active span:nth-child(2) {
    opacity: 0;
  }
  .lines-btn.active span:nth-child(3) {
    transform: rotate(-45deg) translate(5px, -5px);
  }

  #sideMenu {
    position: fixed;
    top: 0;
    right: -300px;
    width: 250px;
    height: 100%;
    background-color: #222;
    color: white;
    padding: 20px;
    box-shadow: -2px 0 5px rgba(0,0,0,0.5);
    transition: right 0.3s;
    z-index: 9999999999999999999999999;
  }

  #sideMenu.open {
    right: 0;
  }
  

  .side-menu {
    text-align: center;
    color: #fff;
    background: #111;
    padding: 20px;
    width: 250px;
    font-family: Arial, sans-serif;
    border: 2px solid #666;
  }

  .side-menu h2 {
    margin-bottom: 15px;
    font-size: 22px;
    border-bottom: 1px solid #666;
    padding-bottom: 8px;
  }

  .user-info {
    margin: 5px 0;
    font-weight: bold;
    font-size: 16px;
  }

  .section-title {
    margin-top: 20px;
    font-size: 16px;
    font-weight: bold;
    color: #fff;
  }

  .separator, .separator-buttons {
    width: 100%;
    height: 2px;
    background: #666;
    margin: 8px 0;
  }

  .separator-buttons {
    margin-top: 20px;
  }

  /* Contenedor de botones */
  .button-container {
    display: flex;
    justify-content: space-between;
    margin-top: 10px; 
  }

  .btn {
    padding: 10px 15px;
    border: 2px solid #666;
    cursor: pointer;
    background: #222;
    color: #fff;
    font-weight: bold;
    transition: 0.2s;
  }

  .btn:hover {
    background: #333;
    border-color: #aaa;
  }

  #deleteBtn:hover {
    background: #500;
    border-color: #a00;
  }
.tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-10px);
  background-color: rgba(0,0,0,0.9);
  color: #fff;
  padding: 6px 10px;
  border-radius: 5px;
  font-size: 12px;
  text-align: center;
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s, transform 0.3s;
  z-index: 9999;
}

.card-outer:hover .tooltip {
  opacity: 1;
  transform: translateX(-50%) translateY(-15px); 
}

.card-outer {
  position: relative;
}








/* ----- Contenedor de las armas calificadas ----- */
/* Contenedor de armas calificadas */
.armas-calificadas-section {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  max-height: 250px;
  overflow-y: auto;
  padding: 6px;
}


/* Tarjeta individual */
.armas-calificadas-section {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  max-height: 250px;
  overflow-y: auto;
  padding: 6px;
}


.arma-calificada-card:hover {
  transform: scale(1.05);
}

/* Imagen del arma */
.arma-calificada-img {
  width: 70px !important;
  height: 70px !important;
}


/* Nombre del arma */
.arma-calificada-nombre {
  font-size: 0.75rem;
  margin: 1px 0;
  text-align: center;
  color: #fff;
  word-wrap: break-word;
}

/* Estrellas del usuario */
.arma-calificada-rating {
  font-size: 0.7rem;
  margin: 0;
  text-align: center;
  color: #ff4d4d;
}
.arma-calificada-card * {
  margin: 0;
  padding: 0;
}


/* ----- Encabezado y botones fijos arriba ----- */
.perfil-section-title,
.perfil-user-info,
.perfil-header,
.perfil-button-container {
  position: sticky;
  top: 0;
  background: transparent; /* sin fondo oscuro */
  z-index: 100;
}

/* ----- Botones del perfil (sin cambios del estilo anterior) ----- */
.perfil-button-container {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  position: sticky;
  bottom: 0;
  padding: 10px;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(4px);
  z-index: 150; /* encima de las tarjetas */
}


/* Estilo base */
.perfil-btn {
  flex: 1;
  padding: 10px 0;
  border: none;
  border-radius: 0; /* sin bordes redondeados */
  font-weight: bold;
  font-size: 0.95rem;
  cursor: pointer;
  transition: all 0.25s ease;
  color: #fff;
  background: rgba(40, 40, 40, 0.8);
}

/* Hover */
.perfil-btn:hover {
  background: rgba(80, 80, 80, 0.9);
  transform: scale(1.02);
}

/* Botón izquierdo: salir */
.perfil-btn-left {
  background: rgba(50, 50, 50, 0.8);
}

.perfil-btn-left:hover {
  background: rgba(90, 90, 90, 0.9);
}

/* Botón derecho: eliminar cuenta */
.perfil-btn-right {
  background: rgba(100, 0, 0, 0.8);
}

.perfil-btn-right:hover {
  background: rgba(150, 0, 0, 0.9);
}



</style>
</head>
<body>

<div class="visitas-box">
    Visitas: <span id="visitas">0</span>
  </div>
  
  
  
<div class="neon-line-vertical"></div>
<div class="top-bar">
  <div class="dropdown-wrapper">
    <button class="dropdown-btn btn-style" onclick="toggleDropdown()">Contacto</button>
    <div id="myDropdown" class="dropdown-content">
      <a href="https://www.tiktok.com" target="_blank" class="btn-style">TikTok</a>
      <a href="https://www.facebook.com" target="_blank" class="btn-style">Facebook</a>
      <a href="https://www.youtube.com" target="_blank" class="btn-style">YouTube</a>
    </div>
  </div>
</div>


<div class="second-bar">
  <div class="left-items">
    <img src="Logo.png" alt="Logo">
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Buscar modelos...">
      <button id="searchBtn" class="btn-style">Buscar</button>
    </div>
  </div>
  
  
 <div id="linesBtnContainer" class="container">
    <button class="lines-btn">
        <span></span>
        <span></span>
        <span></span>
    </button>
</div>


  
  <button class="register-btn btn-style">Registrarse</button>
  
  
 
  
  
  </div>
</div>


<div class="sub-bar">
  <div class="sub-dropdown">
    <button class="dropdown-display btn-style" onclick="toggleSubDropdown('tipoItems')">Tipo de modelos</button>
    <div class="dropdown-items" id="tipoItems">
      <button class="btn-style" onclick="selectItem('tipo','Todos')">Todos</button>
      <button class="btn-style" onclick="selectItem('tipo','Low Poly')">Low Poly</button>
      <button class="btn-style" onclick="selectItem('tipo','High Poly')">High Poly</button>
      <button class="btn-style" onclick="selectItem('tipo','Escenarios')">Escenarios</button>
    </div>
    <span class="selected-text" id="tipoText">Todos</span>
  </div>
  
  <div class="sub-dropdown">
    <button class="dropdown-display btn-style" onclick="toggleSubDropdown('catItems')">Categoría</button>
    <div class="dropdown-items" id="catItems">
      <button class="btn-style" onclick="selectItem('categoria','Todos')">Todos</button>
      <button class="btn-style" onclick="selectItem('categoria','Militar')">Militar</button>
      <button class="btn-style" onclick="selectItem('categoria','Autos')">Autos</button>
      <button class="btn-style" onclick="selectItem('categoria','Naturaleza')">Naturaleza</button>
      <button class="btn-style" onclick="selectItem('categoria','Armas')">Armas</button>
      <button class="btn-style" onclick="selectItem('categoria','Casa')">Casa</button>
      <button class="btn-style" onclick="selectItem('categoria','Edificios')">Edificios</button>
      <button class="btn-style" onclick="selectItem('categoria','Comidas')">Comidas</button>
    </div>
    <span class="selected-text" id="categoriaText">Todos</span>
  </div>

  <div class="sub-dropdown">
    <button class="dropdown-display btn-style" onclick="toggleSubDropdown('precioItems')">Precio</button>
    <div class="dropdown-items" id="precioItems">
      <button class="btn-style" onclick="selectItem('precio','Todos')">Todos</button>
      <button class="btn-style" onclick="selectItem('precio','Gratis')">Gratis</button>
      <button class="btn-style" onclick="selectItem('precio','De pago')">De pago</button>
    </div>
    <span class="selected-text" id="precioText">Todos</span>
  </div>
</div>

<div class="cards-container">

 <button class="card-outer" data-model="fnfal" data-tags="Todos,Militar,Armas,De pago,Low Poly">
  <div class="card-inner">
    <img src="FNFalImage.png" alt="FN FAL Low Poly">
    <h3>FN FAL</h3>
  </div>
  <div class="tooltip">
    Precio: $2<br>
    Archivos: fbx, obj, blend<br>
    Estrellas: <span class="totalStars" data-model="fnfal">0</span>
  </div>
</button>

<button class="card-outer" data-model="mauser1909" data-tags="Todos,Militar,Armas,De pago,Low Poly">
  <div class="card-inner">
    <img src="ArmaMauserModelo1909Mauser.png" alt="Mauser 1909 Low Poly">
    <h3>Mauser 1909</h3>
  </div>
  <div class="tooltip">
    Precio: $2<br>
    Archivos: fbx, obj, blend<br>
    Estrellas: <span class="totalStars" data-model="mauser1909">0</span>
  </div>
</button>

<button class="card-outer" data-model="mac-10" data-tags="Todos,Militar,Armas,Gratis,Low Poly">
  <div class="card-inner">
    <img src="IconoMac10.png" alt="Mac-10 Low Poly">
    <h3>Mac - 10</h3>
  </div>
  <div class="tooltip">
    Precio: Gratis<br>
    Archivos: fbx, obj, blend<br>
    Estrellas: <span class="totalStars" data-model="mac-10">0</span>
  </div>
</button>
</div>
</div>


<!-- Panel emergente FN FAL -->
<div class="model-panel" data-model="fnfal" style="overflow-y:auto;">
  <button class="close-panel">Volver</button>
  <div class="panel-content" style="text-align:center; padding:20px; box-sizing:border-box;">

    <img src="FNFalImage.png" alt="FN FAL" style="max-width:200px; margin-bottom:15px; border-radius:5px;">
    
    <h2 style="margin-bottom:15px;">FN FAL</h2>
    
    <div style="margin-bottom:15px; display:flex; justify-content:center; gap:10px;">
      <div class="panel-buttons">
        <button class="action-btn btn-style" onclick="window.open('https://sketchfab.com/3d-models/fn-fal-83-9cbcfe7c99ed4542b8e1012fe621a2f7', '_blank')">Ver</button>
        <button class="action-btn btn-style" onclick="window.open('https://www.cgtrader.com/3d-models/military/gun/fn-fal-83-low-poly', '_blank')">Comprar a $2</button>
      </div>
    </div>
<div style="margin-bottom:15px;"> 
  <span style="font-weight:bold; margin-right:10px;">Califica este modelo :</span>
  <span class="star" data-value="1" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
  <span class="star" data-value="2" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
  <span class="star" data-value="3" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
  <span class="star" data-value="4" style="font-size:30px; cursor:pointer; color:#888;">☆</span> 
  <span class="star" data-value="5" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
  <button id="rateBtn" class="action-btn rate-btn" style="margin-left:10px;">Calificar</button>
</div>
	
	
    <div style="margin-bottom:15px;">
      <span style="font-weight:bold; margin-right:5px;">Tags:</span>
      <span class="tag">Todos</span>
      <span class="tag">Militar</span>
      <span class="tag">Armas</span>
      <span class="tag">De pago</span>
      <span class="tag">Low Poly</span>
    </div>
    
    <div>
      <span style="font-weight:bold;">Archivos:</span> Fbx, Blend, Obj
    </div>
<h3 style="text-align:center; margin-top:20px; margin-bottom:15px; color:white;">Imágenes</h3>
<div class="gallery-container">
  <button class="gallery-prev">‹</button>
  <div class="gallery-slide">
    <img src="ImageFnFal1.png" alt="FN FAL 1">
    <img src="ImageFnFal2.png" alt="FN FAL 2">
    <img src="ImageFnFal3.png" alt="FN FAL 3">
    <img src="ImageFnFal4.png" alt="FN FAL 4">
  </div>
  <button class="gallery-next">›</button>
</div>
<h3 style="text-align:center; margin-top:30px; margin-bottom:15px; color:white;">Modelos Recomendados</h3>

<div id="recommendedModels-fnfal" style="display:flex; justify-content:center; gap:20px; overflow-x:auto; padding:10px 0; white-space: nowrap;">
 
</div>
</div>
</div>



<!-- Panel emergente Mauser 1909 -->
<div class="model-panel" data-model="mauser1909" style="overflow-y:auto;">
  <button class="close-panel">Volver</button>
  <div class="panel-content" style="text-align:center; padding:20px; box-sizing:border-box;">
    
    <img src="ArmaMauserModelo1909Mauser.png" alt="Mauser 1909" style="max-width:200px; margin-bottom:15px; border-radius:5px;">
    
    <h2 style="margin-bottom:15px;">Mauser 1909</h2>
    
    <div style="margin-bottom:15px; display:flex; justify-content:center; gap:10px;">
      <div class="panel-buttons">
        <button class="action-btn btn-style" onclick="window.open('https://sketchfab.com/3d-models/mauser-modelo-1909-342561d9c8c64de09298f4c2592947c7', '_blank')">Ver</button>
        <button class="action-btn btn-style" onclick="window.open('https://www.cgtrader.com/3d-models/military/gun/mauser-modelo-1909-low-poly', '_blank')">Comprar a $2</button>
      </div>
    </div>
	
	
    <div style="margin-bottom:15px;">
      <span style="font-weight:bold; margin-right:10px;">Califica este modelo :</span>
      <span class="star" data-value="1" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
      <span class="star" data-value="2" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
      <span class="star" data-value="3" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
      <span class="star" data-value="4" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
      <span class="star" data-value="5" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
      <button class="action-btn rate-btn" style="margin-left:10px;">Calificar</button>
    </div>
    <div style="margin-bottom:15px;">
      <span style="font-weight:bold; margin-right:5px;">Tags:</span>
      <span class="tag">Todos</span>
      <span class="tag">Militar</span>
      <span class="tag">Armas</span>
      <span class="tag">De pago</span>
      <span class="tag">Low Poly</span>
    </div>
    
    <div>
      <span style="font-weight:bold;">Archivos:</span> Fbx, Blend, Obj
    </div>
<h3 style="text-align:center; margin-top:20px; margin-bottom:15px; color:white;">Imágenes</h3>
<div class="gallery-container">
  <button class="gallery-prev">‹</button>
  <div class="gallery-slide">
    <img src="ImageMauser19091.png" alt="Mauser 19091">
    <img src="ImageMauser19092.png" alt="Mauser 19092">
    <img src="ImageMauser19093.png" alt="Mauser 19093">
    <img src="ImageMauser19094.png" alt="Mauser 19094">
  </div>
  <button class="gallery-next">›</button>
</div>

    <h3 style="text-align:center; margin-top:30px; margin-bottom:15px; color:white;">Modelos Recomendados</h3>
    
    <div id="recommendedModels-mauser1909" style="display:flex; justify-content:center; gap:20px; overflow-x:auto; padding:10px 0; white-space: nowrap;">
    
    </div>
    
  </div>
</div>

<div class="model-panel" data-model="mac-10" style="overflow-y:auto;">
  <button class="close-panel">Volver</button>
  <div class="panel-content" style="text-align:center; padding:20px; box-sizing:border-box;">

    <img src="IconoMac10.png" alt="Mac 10" style="max-width:200px; margin-bottom:15px; border-radius:5px;">
    
    <h2 style="margin-bottom:15px;">Mac - 10</h2>
    
    <div style="margin-bottom:15px; display:flex; justify-content:center; gap:10px;">
      <div class="panel-buttons">
        <button class="action-btn btn-style" onclick="window.open('https://sketchfab.com/3d-models/mac-10-low-poly-3f059f38df12436bb484bacb468a54a0', '_blank')">Ver</button>
        <button class="action-btn btn-style" onclick="window.open('https://www.cgtrader.com/free-3d-models/military/gun/mac-10-low-poly-4905e7ac-9ccf-485c-8575-cf61379d46e1', '_blank')">Gratis</button>
      </div>
    </div>
    
<div style="margin-bottom:15px;">
  <span style="font-weight:bold; margin-right:10px;">Califica este modelo :</span>
  <span class="star" data-value="1" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
  <span class="star" data-value="2" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
  <span class="star" data-value="3" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
  <span class="star" data-value="4" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
  <span class="star" data-value="5" style="font-size:30px; cursor:pointer; color:#888;">☆</span>
 <button id="rateBtn" class="action-btn rate-btn" style="margin-left:10px;">Calificar</button>


</div>
	
	
    <div style="margin-bottom:15px;">
      <span style="font-weight:bold; margin-right:5px;">Tags:</span>
      <span class="tag">Todos</span>
      <span class="tag">Militar</span>
      <span class="tag">Armas</span>
      <span class="tag">Gratis</span>
      <span class="tag">Low Poly</span>
    </div>
    
    <div>
      <span style="font-weight:bold;">Archivos:</span> Fbx, Blend, Obj
    </div>

<h3 style="text-align:center; margin-top:20px; margin-bottom:15px; color:white;">Imágenes</h3>
<div class="gallery-container">
  <button class="gallery-prev">‹</button>
  <div class="gallery-slide">
    <img src="ImageMac101.png" alt="FN FAL 1">
    <img src="ImageMac102.png" alt="FN FAL 2">
    <img src="ImageMac103.png" alt="FN FAL 3">
    <img src="ImageMac104.png" alt="FN FAL 4">
  </div>
  <button class="gallery-next">›</button>
</div>
<h3 style="text-align:center; margin-top:30px; margin-bottom:15px; color:white;">Modelos Recomendados</h3>

<div id="recommendedModels-mac-10" style="display:flex; justify-content:center; gap:20px; overflow-x:auto; padding:10px 0; white-space: nowrap;">

</div>
</div>
</div>
</div>
<div id="registerOverlay" class="overlay">
  <div id="registerPanel" class="register-panel">
    <button class="close-panel" onclick="closeRegister()">✖</button>
    <h2>Crear Cuenta</h2>
    <p class="register-note">No tienes la obligación de registrarte para continuar a la página</p>

    <input type="text" id="regName" placeholder="Nombre" class="reg-input">
    <input type="email" id="regEmail" placeholder="Correo" class="reg-input">
    <input type="password" id="regPassword" placeholder="Contraseña" class="reg-input">
    <input type="password" id="regConfirm" placeholder="Confirmar contraseña" class="reg-input">

    <button class="create-btn">Crear Cuenta</button>

    <p style="margin-top:20px; font-size:14px; text-align:center;">
      ¿Ya tienes una cuenta? 
      <a id="openLogin" style="color:#fff; text-decoration:underline; cursor:pointer;">Click aquí</a>
    </p>
  </div>
</div>

<div id="loginOverlay" class="overlay">
  <div id="loginPanel" class="register-panel">
    <button class="close-panel" onclick="closeLogin()">✖</button>
    <h2>Iniciar Sesión</h2>
    <p class="register-note">Ingresa con tu correo y contraseña</p>
    <input type="email" id="loginEmail" placeholder="Correo" class="reg-input">
    <input type="password" id="loginPassword" placeholder="Contraseña" class="reg-input">
<button id="loginBtn" class="create-btn">Iniciar Sesión</button>
    <p style="margin-top:15px; font-size:14px; text-align:center;">
      No tienes cuenta? 
      <a id="openRegister" style="color:#fff; text-decoration:underline; cursor:pointer;">Click aquí</a>
    </p>
  </div>
</div>

<div id="sideMenu" class="side-menu">
<h2 class="perfil-header">Perfil</h2>
<p id="userEmail" class="perfil-user-info"></p>
<p id="user" class="perfil-user-info"></p>

<p class="perfil-section-title">Armas calificadas</p>
<div class="separator"></div>

<div id="armas-calificadas-container" class="armas-calificadas-section"></div>

<div class="perfil-button-container">
  <button id="logoutBtn" class="perfil-btn perfil-btn-left">Salir de la cuenta</button>
  <button id="deleteBtn" class="perfil-btn perfil-btn-right">Eliminar Cuenta</button>
</div>





</div>






<Script type="module">
import { getAuth, signOut, deleteUser } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

const auth = getAuth();

const logoutBtn = document.getElementById("logoutBtn");
const deleteBtn = document.getElementById("deleteBtn");

if (logoutBtn) {
  logoutBtn.addEventListener("click", async () => {
    try {
      await signOut(auth); // Cierra sesión en Firebase
      localStorage.clear(); // Limpia todo lo que guardaste en el navegador
      alert("Sesión cerrada ✅");
      location.reload(); // opcional, recarga la página para reflejar cambios
    } catch (error) {
      console.error("Error al cerrar sesión:", error);
      alert("Error al cerrar sesión");
    }
  });
}

if (deleteBtn) {
  deleteBtn.addEventListener("click", async () => {
    if (!auth.currentUser) return alert("No hay usuario logueado");
    const user = auth.currentUser;
    if (!confirm("¿Estás seguro de eliminar tu cuenta? Esto no se puede deshacer.")) return;

    try {
      await deleteUser(user); // Elimina la cuenta de Firebase
      localStorage.clear(); // Limpia datos guardados
      alert("Cuenta eliminada ✅");
      location.reload(); // recarga para estado inicial
    } catch (error) {
      console.error("Error al eliminar cuenta:", error);
      alert("No se pudo eliminar la cuenta: " + error.message);
    }
  });
}

</Script>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getDatabase, ref, set, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCrZU4jrYQdLWICNIa-PsaurM-nQNDVcMk",
  authDomain: "jsi-creative.firebaseapp.com",
  projectId: "jsi-creative",
  storageBucket: "jsi-creative.firebasestorage.app",
  messagingSenderId: "622524062601",
  appId: "1:622524062601:web:69d2afeeb6503c2a605f58",
  measurementId: "G-SMYBMVEJ48"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const auth = getAuth(app);

// Mostrar el total de estrellas de cada modelo
document.querySelectorAll('.totalStars').forEach(span => {
  const modelName = span.dataset.model;
  const estrellasRef = ref(db, `${modelName}/estrellas`);
  onValue(estrellasRef, snapshot => {
    const total = snapshot.val() || 0;
    span.textContent = total;
  });
});

function setupModelPanel(panel, uid) {
  const modelName = panel.dataset.model;
  const stars = panel.querySelectorAll('.star');
  const btn = panel.querySelector('button.rate-btn');

  let rating = 0;
  let yaCalifico = false;

  function updateStars(tempRating = 0) {
    stars.forEach(s => {
      if (tempRating > 0) {
        s.textContent = parseInt(s.dataset.value) <= tempRating ? '★' : '☆';
        s.style.color = parseInt(s.dataset.value) <= tempRating ? 'red' : '#888';
      } else {
        s.textContent = parseInt(s.dataset.value) <= rating ? '★' : '☆';
        s.style.color = parseInt(s.dataset.value) <= rating ? 'red' : '#888';
      }
    });
  }

  stars.forEach(star => {
    star.addEventListener('mouseover', () => { if (!yaCalifico) updateStars(parseInt(star.dataset.value)); });
    star.addEventListener('mouseout', () => { if (!yaCalifico) updateStars(); });
    star.addEventListener('click', () => { if (!yaCalifico) { rating = parseInt(star.dataset.value); updateStars(); } });
  });

  if (btn) {
    btn.addEventListener('click', async () => {
      if (!yaCalifico) {
        if (rating === 0) {
          alert('Selecciona primero la cantidad de estrellas.');
          return;
        }

        yaCalifico = true;
        btn.style.display = 'none';
        updateStars();
        stars.forEach(s => { s.style.pointerEvents = 'none'; s.style.cursor = 'default'; });

        // Guardar rating individual
        const ratingRef = ref(db, `ratings/${uid}/${modelName}`);
        await set(ratingRef, rating);

        // Actualizar total de estrellas global
        const estrellasRef = ref(db, `${modelName}/estrellas`);
        runTransaction(estrellasRef, current => (current || 0) + rating);

        alert('¡Gracias por calificar!');
      }
    });
  }

  // Cargar rating individual del usuario
  const ratingRef = ref(db, `ratings/${uid}/${modelName}`);
  onValue(ratingRef, snapshot => {
    const value = snapshot.val();
    if (value) {
      rating = value;
      yaCalifico = true;
      updateStars();
      if (btn) btn.style.display = 'none';
      stars.forEach(s => { s.style.pointerEvents = 'none'; s.style.cursor = 'default'; });
    } else {
      rating = 0;
      yaCalifico = false;
      updateStars();
      if (btn) btn.style.display = 'inline-block';
      stars.forEach(s => { s.style.pointerEvents = 'auto'; s.style.cursor = 'pointer'; });
    }
  });
}

// Ejecutar cuando el usuario esté logueado
onAuthStateChanged(auth, user => {
  if (user) {
    document.querySelectorAll('.model-panel').forEach(panel => setupModelPanel(panel, user.uid));
  } else {
    console.log('Usuario no logueado, no se pueden guardar ratings');
  }
});


function mostrarArmaCalificada(modelName, nombreArma, estrellas) {
  const container = document.querySelector('#armas-calificadas-container');
  if (!container) return;

  // Evitar duplicados
  if (container.querySelector(`[data-model="${modelName}"]`)) return;

  const card = document.createElement('div');
  card.className = 'arma-calificada-card';
  card.dataset.model = modelName;

  const panel = document.querySelector(`.model-panel[data-model="${modelName}"]`);
  const imgSrc = panel ? panel.querySelector('img')?.src || '' : '';

  card.innerHTML = `
    <img src="${imgSrc}" alt="${nombreArma}" class="arma-calificada-img">
    <h3 class="arma-calificada-nombre">${nombreArma}</h3>
    <p class="arma-calificada-rating">Estrellas: ${estrellas}</p>
  `;

  container.appendChild(card);
}



// Espera que todo el DOM esté listo
document.addEventListener('DOMContentLoaded', () => {

  // Función que muestra un arma calificada como tarjeta
  function mostrarArmaCalificada(modelName, nombreArma, estrellas) {
    const container = document.querySelector('#armas-calificadas-container');
    if (!container) return;

    // Evitar duplicados
    if (container.querySelector(`[data-model="${modelName}"]`)) return;

    const card = document.createElement('div');
    card.className = 'card-outer';
    card.dataset.model = modelName;

    // Obtener imagen desde el panel original si existe
    const panel = document.querySelector(`.model-panel[data-model="${modelName}"]`);
    const imgSrc = panel ? panel.querySelector('img')?.src || '' : '';

    card.innerHTML = `
      <div class="card-inner">
        <img src="${imgSrc}" alt="${nombreArma}">
        <div>
          <h3>${nombreArma}</h3>
          <p>Estrellas: ${estrellas}</p>
        </div>
      </div>
    `;

    container.appendChild(card);
  }

  // Cargar todas las armas calificadas del usuario
  onAuthStateChanged(auth, user => {
    if (user) {
      const ratingsRef = ref(db, `ratings/${user.uid}`);
      onValue(ratingsRef, snapshot => {
        const data = snapshot.val() || {};
        for (const modelName in data) {
          const rating = data[modelName];
          const panel = document.querySelector(`.model-panel[data-model="${modelName}"]`);
          const nombreArma = panel ? panel.querySelector('h3').textContent : modelName;
          mostrarArmaCalificada(modelName, nombreArma, rating);
        }
      });
    }
  });

});


</script>


<script>
  const btn = document.querySelector('.lines-btn');
  const menu = document.getElementById('sideMenu');

  btn.addEventListener('click', (e) => {
    e.stopPropagation(); 
    btn.classList.toggle('active');
    menu.classList.toggle('open');
  });
  document.addEventListener('click', (e) => {
    if(menu.classList.contains('open') && !menu.contains(e.target) && !btn.contains(e.target)) {
      menu.classList.remove('open');
      btn.classList.remove('active');
    }
  });
</script>
<script>
  document.querySelector('.register-btn').addEventListener('click', () => {
    document.getElementById('registerOverlay').style.display = 'flex';
  });

  function closeRegister() {
    document.getElementById('registerOverlay').style.display = 'none';
  }
  document.getElementById('openLogin').addEventListener('click', () => {
    closeRegister();
    document.getElementById('loginOverlay').style.display = 'flex';
  });

  function closeLogin() {
    document.getElementById('loginOverlay').style.display = 'none';
  }
  document.getElementById('openRegister').addEventListener('click', () => {
    closeLogin();
    document.getElementById('registerOverlay').style.display = 'flex';
  });
</script>


<script>
  function closeRegister() {
    document.getElementById("registerOverlay").style.display = "none";
  }
</script>

<script>
function toggleDropdown() {
  const dropdown = document.getElementById("myDropdown");

  if(dropdown.classList.contains('show')){
    dropdown.classList.remove('show');
    setTimeout(() => dropdown.style.display = 'none', 300);
  } else {
    dropdown.style.display = 'flex';
    setTimeout(() => dropdown.classList.add('show'), 10);
  }
}
function toggleSubDropdown(id) {
  const dropdown = document.getElementById(id);
  const allDropdowns = document.querySelectorAll('.dropdown-items');

  allDropdowns.forEach(d => {
    if(d.id !== id) {
      d.classList.remove('show');
      setTimeout(() => d.style.display = 'none', 300);
    }
  });

  if(dropdown.classList.contains('show')){
    dropdown.classList.remove('show');
    setTimeout(() => dropdown.style.display = 'none', 300);
  } else {
    dropdown.style.display = 'flex';
    setTimeout(() => dropdown.classList.add('show'), 10);
  }
}
function selectItem(type, value){
  document.getElementById(type + 'Text').textContent = value;
  const dropdown = type === 'tipo' ? document.getElementById('tipoItems') :
                   type === 'categoria' ? document.getElementById('catItems') :
                   document.getElementById('precioItems');
  dropdown.style.display = 'none';

  filterCards();
}


window.addEventListener('click', function(e){
  const contactDropdown = document.getElementById("myDropdown");
  const subDropdowns = document.querySelectorAll('.dropdown-items');
  if(!e.target.closest('.sub-dropdown')) {
    subDropdowns.forEach(d => {
      d.classList.remove('show');
      setTimeout(() => d.style.display = 'none', 300);
    });
  }
  if(!e.target.closest('.dropdown-btn') && !e.target.closest('#myDropdown')){
    contactDropdown.classList.remove('show');
    setTimeout(() => contactDropdown.style.display = 'none', 300);
  }
});

document.querySelectorAll('.card-outer').forEach(outer => {
  const inner = outer.querySelector('.card-inner');
  let spinning = false;

  outer.addEventListener('mouseenter', () => {
    if (!spinning) {
      spinning = true;
      outer.classList.add('spin360');
      setTimeout(() => {
        outer.classList.remove('spin360');
        spinning = false;
        inner.style.transform = `rotateY(0deg) rotateX(0deg) scale(1)`;
      }, 1000);
    }
  });

  inner.addEventListener('mousemove', e => {
    if (!spinning) { 
      const rect = inner.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const midX = rect.width / 2;
      const midY = rect.height / 2;
      const rotateY = ((x - midX) / midX) * 15;
      const rotateX = ((midY - y) / midY) * 15;
      inner.style.transform = `rotateY(${rotateY}deg) rotateX(${rotateX}deg) scale(1)`;
    }
  });

  inner.addEventListener('mouseleave', () => {
    if (!spinning) {
      inner.style.transform = `rotateY(0deg) rotateX(0deg) scale(1)`;
    }
  });
});
document.querySelectorAll('.model-panel .close-panel').forEach(btn => {
  btn.addEventListener('click', () => {
    const panel = btn.closest('.model-panel');
    panel.style.display = "none";
  });
});
function filterCards() {
  const tipo = document.getElementById('tipoText').textContent;
  const categoria = document.getElementById('categoriaText').textContent;
  const precio = document.getElementById('precioText').textContent;

  document.querySelectorAll('.card-outer').forEach(card => {
    const tags = card.dataset.tags.split(',');
    
    const matchTipo = (tipo === 'Todos' || tags.includes(tipo));
    const matchCategoria = (categoria === 'Todos' || tags.includes(categoria));
    const matchPrecio = (precio === 'Todos' || tags.includes(precio));

    if(matchTipo && matchCategoria && matchPrecio) {
      card.style.display = 'block';
    } else {
      card.style.display = 'none';
    }
  });
}

document.getElementById('searchBtn').addEventListener('click', function() {
  const query = document.getElementById('searchInput').value.toLowerCase().trim();
  
  document.querySelectorAll('.card-outer').forEach(card => {
    const name = card.querySelector('h3').textContent.toLowerCase();
    
    if(query === "") {
      card.style.display = 'block';
    } else {
      card.style.display = name.includes(query) ? 'block' : 'none';
    }
  });
});
</script>
<script>
(function(){
  const allCards = Array.from(document.querySelectorAll('.card-outer'));

  document.querySelectorAll('.model-panel').forEach(panel => {
    const model = panel.dataset.model;
    const recommendedContainer = panel.querySelector(`#recommendedModels-${model}`);
    
    if(!recommendedContainer) return;

    const panelTags = panel.querySelectorAll('.tag');
    let tags = [];
    panelTags.forEach(t => tags.push(t.textContent));
    let filteredCards = allCards.filter(card => {
      const cardTags = card.dataset.tags.split(',');
      return tags.some(tag => cardTags.includes(tag)) && card.dataset.model !== model;
    });
    filteredCards.sort(() => Math.random() - 0.5);
    filteredCards.slice(0, 5).forEach(card => {
      const recCard = createRecCard(card);
      recommendedContainer.appendChild(recCard);
    });
    while(recommendedContainer.children.length < 5 && filteredCards.length > 0){
      const randomCard = filteredCards[Math.floor(Math.random() * filteredCards.length)];
      const recCard = createRecCard(randomCard);
      recommendedContainer.appendChild(recCard);
    }
  });
  function createRecCard(card){
    const recCard = document.createElement('div');
    recCard.className = "recommended-card";
    recCard.style.cssText = `
      display:inline-block;
      width:150px;
      background:#2a2a2a;
      border:2px solid #888;
      border-radius:8px;
      padding:10px;
      cursor:pointer;
      text-align:center;
      box-shadow:0 0 8px rgba(0,0,0,0.7);
      transition: transform 0.2s ease;
    `;

    const img = card.querySelector('img').cloneNode(true);
    img.style.maxWidth = "120px";
    img.style.height = "auto";
    recCard.appendChild(img);

    const name = document.createElement('h4');
    name.textContent = card.querySelector('h3').textContent;
    name.style.color = "white";
    name.style.marginTop = "10px";
    recCard.appendChild(name);

    recCard.addEventListener('mousemove', e => {
      const rect = recCard.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const midX = rect.width/2;
      const midY = rect.height/2;
      const rotateY = ((x-midX)/midX)*15;
      const rotateX = ((midY-y)/midY)*15;
      recCard.style.transform = `rotateY(${rotateY}deg) rotateX(${rotateX}deg) scale(1.05)`;
    });

    recCard.addEventListener('mouseleave', () => {
      recCard.style.transform = "rotateY(0deg) rotateX(0deg) scale(1)";
    });

recCard.addEventListener('click', () => {
  document.querySelectorAll('.model-panel').forEach(p => {
    p.style.display = "none";
  });
  const targetPanel = document.querySelector(`.model-panel[data-model="${card.dataset.model}"]`);
  if(targetPanel) targetPanel.style.display = "block";
});

    return recCard;
  }

})();
</script>



<script>
document.querySelectorAll('.card-outer').forEach(card => {
  card.addEventListener('click', () => {
    const model = card.dataset.model;
    const panel = document.querySelector(`.model-panel[data-model="${model}"]`);
    if(panel){
      panel.style.display = "block";
	  
    }
  });
});
document.querySelectorAll('.model-panel .close-panel').forEach(btn => {
  btn.addEventListener('click', () => {
    const panel = btn.closest('.model-panel');
    panel.style.display = "none";
  });
});
</script>

<Script>
const mauserContainer = document.querySelectorAll('.gallery-container');

mauserContainer.forEach(container => {
  const slide = container.querySelector('.gallery-slide');
  const images = slide.querySelectorAll('img');
  let currentIndex = 0;

  const updateSlide = () => {
    const offset = -currentIndex * (images[0].clientWidth + 15);
    slide.style.transform = `translateX(${offset}px)`;
  };

  container.querySelector('.gallery-next').addEventListener('click', () => {
    currentIndex = (currentIndex + 1) % images.length;
    updateSlide();
  });

  container.querySelector('.gallery-prev').addEventListener('click', () => {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    updateSlide();
  });

  images.forEach((img, index) => {
    img.addEventListener('click', () => {
      currentIndex = index;
      updateSlide();
    });
  });
});

document.getElementById('visitas').textContent = nuevoNumero;
</Script>
</body>
</html>
